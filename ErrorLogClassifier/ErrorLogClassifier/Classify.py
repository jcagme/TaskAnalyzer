import jellyfish
import numpy as np
import pandas as pd
import pickle

from difflib import SequenceMatcher
from sklearn import svm, preprocessing

def similarity(x,y):
    return SequenceMatcher(None, content[x], content[y]).ratio()

def jaro_winkler(x,y):
    return jellyfish.jaro_winkler(content[x],content[y])

def damerau_levenshtein(x,y):
    return 10000 - jellyfish.damerau_levenshtein_distance(content[x],content[y])

def custom_distance(i,j):
    return (SequenceMatcher(None, i, j).ratio() * jellyfish.jaro_winkler(i,j) * 1000) * (10000 - jellyfish.damerau_levenshtein_distance(i,j))

representativeElementOfEqClass = ['E:\\A\\_work\\0\\b\\pipelineRepository\\Tools\\SyncCloudContent.targets(0,0): error :    at Microsoft.DotNet.Build.CloudTestTasks.DownloadFromAzure.<ExecuteAsync>d__17.MoveNext() [E:\\A\\_work\\0\\b\\pipelineRepository\\src\\syncAzure.proj]',
 'E:\\A\\_work\\0\\a\\MicroBuild\\Plugins\\MicroBuild.Plugins.Signing.1.0.321\\build\\MicroBuild.Plugins.Signing.targets(0,0): error : 2 files had signing errors. E:\\A\\_work\\0\\s\\corefx\\bin\\ref\\CoreFx.Private.TestUtilities\\1.0.0.0\\netstandard\\CoreFx.Private.TestUtilities.dll, E:\\A\\_work\\0\\s\\corefx\\bin\\Windows_NT.AnyCPU.platform\\CoreFx.Private.TestUtilities\\uap\\CoreFx.Private.TestUtilities.dll [E:\\A\\_work\\0\\s\\corefx\\src\\sign.builds]',
 "E:\\A\\_work\\0\\s\\corefx\\Tools\\BlockReflectionAttribute.cs(0,0): error CS0246: The type or namespace name 'AttributeUsage' could not be found (are you missing a using directive or an assembly reference?) [E:\\A\\_work\\0\\s\\corefx\\src\\shims\\manual\\mscorlib.csproj]",
 'C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\BuildCustomizations\\masm.targets(0,0): error MSB3721: The command "ml64.exe /c /nologo /Zi /Fo"cee_wks.dir\\platform\\AsmHelpers.obj" /D"_ARM64_" /D"ARM64" /D"_WIN64" /D"BIT64=1" /D"_TARGET_ARM64_=1" /D"DBG_TARGET_64BIT=1" /D"DBG_TARGET_ARM64=1" /D"DBG_TARGET_WIN64=1" /D"FEATURE_MULTIREG_RETURN" /D"_BLD_CLR" /D"platformGING_SUPPORTED" /D"PROFILING_SUPPORTED" /D"WIN32" /D"_WIN32" /D"WINVER=0x0602" /D"_WIN32_WINNT=0x0602" /D"WIN32_LEAN_AND_MEAN=1" /D"_CRT_SECURE_NO_WARNINGS" /D"FEATURE_APPDOMAIN_RESOURCE_MONITORING" /D"FEATURE_APPX" /D"FEATURE_ARRAYSTUB_AS_IL" /D"FEATURE_MULTICASTSTUB_AS_IL" /D"FEATURE_COLLECTIBLE_TYPES" /D"FEATURE_CLASSIC_COMINTEROP" /D"FEATURE_COMINTEROP" /D"FEATURE_COMINTEROP_APARTMENT_SUPPORT" /D"FEATURE_COMINTEROP_UNMANAGED_ACTIVATION" /D"FEATURE_COMINTEROP_WINRT_MANAGED_ACTIVATION" /D"FEATURE_CORECLR" /D"FEATURE_CORESYSTEM" /D"FEATURE_CORRUPTING_EXCEPTIONS" /D"FEATURE_EVENT_TRACE=1" /D"FEATURE_TIERED_COMPILATION" /D"FEATURE_HIJACK" /D"FEATURE_ICASTABLE" /D"FEATURE_IMPLICIT_TLS" /D"FEATURE_ISYM_READER" /D"FEATURE_LOADER_OPTIMIZATION" /D"FEATURE_MANAGED_ETW" /D"FEATURE_MANAGED_ETW_CHANNELS" /D"FEATURE_MULTICOREJIT" /D"FEATURE_PREJIT" /D"FEATURE_RANDOMIZED_STRING_HASHING" /D"FEATURE_READYTORUN" /D"FEATURE_STANDALONE_SN" /D"FEATURE_STRONGNAME_DELAY_SIGNING_ALLOWED" /D"FEATURE_STRONGNAME_MIGRATION" /D"FEATURE_STUBS_AS_IL" /D"FEATURE_SVR_GC" /D"FEATURE_SYMDIFF" /D"FEATURE_USE_ASM_GC_WRITE_BARRIERS" /D"FEATURE_VERSIONING_LOG" /D"FEATURE_WIN32_REGISTRY" /D"FEATURE_LEGACYNETCF_DBG_HOST_CONTROL" /D"FEATURE_WINDOWSPHONE" /D"FEATURE_WINMD_RESILIENT" /D"_SECURE_SCL=0" /D"UNICODE" /D"_UNICODE" /D"UNICODE" /D"_UNICODE" /D"Nplatform" /D"URTBLDENV_FRIENDLY=Retail" /D"Nplatform" /D"URTBLDENV_FRIENDLY=Retail" /D"_ARM64_" /D"ARM64" /D"_WIN64" /D"BIT64=1" /D"_TARGET_ARM64_=1" /D"DBG_TARGET_64BIT=1" /D"DBG_TARGET_ARM64=1" /D"DBG_TARGET_WIN64=1" /D"FEATURE_MULTIREG_RETURN" /D"_BLD_CLR" /D"platformGING_SUPPORTED" /D"PROFILING_SUPPORTED" /D"WIN32" /D"_WIN32" /D"WINVER=0x0602" /D"_WIN32_WINNT=0x0602" /D"WIN32_LEAN_AND_MEAN=1" /D"_CRT_SECURE_NO_WARNINGS" /D"FEATURE_APPDOMAIN_RESOURCE_MONITORING" /D"FEATURE_APPX" /D"FEATURE_ARRAYSTUB_AS_IL" /D"FEATURE_MULTICASTSTUB_AS_IL" /D"FEATURE_COLLECTIBLE_TYPES" /D"FEATURE_CLASSIC_COMINTEROP" /D"FEATURE_COMINTEROP" /D"FEATURE_COMINTEROP_APARTMENT_SUPPORT" /D"FEATURE_COMINTEROP_UNMANAGED_ACTIVATION" /D"FEATURE_COMINTEROP_WINRT_MANAGED_ACTIVATION" /D"FEATURE_CORECLR" /D"FEATURE_CORESYSTEM" /D"FEATURE_CORRUPTING_EXCEPTIONS" /D"FEATURE_EVENT_TRACE=1" /D"FEATURE_TIERED_COMPILATION" /D"FEATURE_HIJACK" /D"FEATURE_ICASTABLE" /D"FEATURE_IMPLICIT_TLS" /D"FEATURE_ISYM_READER" /D"FEATURE_LOADER_OPTIMIZATION" /D"FEATURE_MANAGED_ETW" /D"FEATURE_MANAGED_ETW_CHANNELS" /D"FEATURE_MULTICOREJIT" /D"FEATURE_PREJIT" /D"FEATURE_RANDOMIZED_STRING_HASHING" /D"FEATURE_READYTORUN" /D"FEATURE_STANDALONE_SN" /D"FEATURE_STRONGNAME_DELAY_SIGNING_ALLOWED" /D"FEATURE_STRONGNAME_MIGRATION" /D"FEATURE_STUBS_AS_IL" /D"FEATURE_SVR_GC" /D"FEATURE_SYMDIFF" /D"FEATURE_USE_ASM_GC_WRITE_BARRIERS" /D"FEATURE_VERSIONING_LOG" /D"FEATURE_WIN32_REGISTRY" /D"FEATURE_LEGACYNETCF_DBG_HOST_CONTROL" /D"FEATURE_WINDOWSPHONE" /D"FEATURE_WINMD_RESILIENT" /D"_SECURE_SCL=0" /D"UNICODE" /D"_UNICODE" /D"CMAKE_INTDIR="platform"" /I "E:\\A\\_work\\0\\s\\bin\\obj\\Windows_NT.arm64.platform\\src\\vm\\wks" /I "E:\\A\\_work\\0\\s\\src\\vm\\wks" /I "E:\\A\\_work\\0\\s\\src\\vm" /I "E:\\A\\_work\\0\\s\\src\\pal\\prebuilt\\inc" /I "E:\\A\\_work\\0\\s\\bin\\obj" /I "E:\\A\\_work\\0\\s\\src\\inc" /I "E:\\A\\_work\\0\\s\\src\\strongname\\inc" /I "E:\\A\\_work\\0\\s\\src\\inc\\winrt" /I "E:\\A\\_work\\0\\s\\src\\platform\\inc" /I "E:\\A\\_work\\0\\s\\src\\platform\\inc\\arm64" /I "E:\\A\\_work\\0\\s\\src\\platform\\inc\\dump" /I "E:\\A\\_work\\0\\s\\src\\md\\inc" /I "E:\\A\\_work\\0\\s\\src\\classlibnative\\bcltype" /I "E:\\A\\_work\\0\\s\\src\\classlibnative\\cryptography" /I "E:\\A\\_work\\0\\s\\src\\classlibnative\\inc" /I "E:\\A\\_work\\0\\s\\bin\\obj\\Windows_NT.arm64.platform\\src\\inc" /I "E:\\A\\_work\\0\\s\\src\\gc" /I "E:\\A\\_work\\0\\s\\src\\vm\\arm64" /W3 /errorReport:prompt  /ZH:SHA_256  /TaE:\\A\\_work\\0\\s\\bin\\obj\\Windows_NT.arm64.platform\\src\\vm\\wks\\AsmHelpers.asm" exited with code 1. [E:\\A\\_work\\0\\s\\bin\\obj\\Windows_NT.arm64.platform\\src\\vm\\wks\\cee_wks.vcxproj]',
 '##[error]/usr/bin/docker failed with error: /usr/bin/docker failed with return code: 1',
 "E:\\A\\_work\\0\\s\\corefx\\bin\\obj\\AnyOS.AnyCPU.platform\\mscorlib\\uap\\_AssemblyInfo.cs(0,0): error CS0518: Predefined type 'System.Boolean' is not defined or imported [E:\\A\\_work\\0\\s\\corefx\\src\\shims\\manual\\mscorlib.csproj]",
 "mscorlib.forwards.cs(0,0): error CS0234: The type or namespace name 'ValueTuple<,>' does not exist in the namespace 'System' (are you missing an assembly reference?) [E:\\A\\_work\\0\\s\\corefx\\src\\shims\\manual\\mscorlib.csproj]",
 "mscorlib.forwards.cs(0,0): error CS0234: The type or namespace name 'Int64EnumComparer<>' does not exist in the namespace 'System.Collections.Generic' (are you missing an assembly reference?) [E:\\A\\_work\\0\\s\\corefx\\src\\shims\\manual\\mscorlib.csproj]",
 'E:\\A\\_work\\0\\s\\src\\Tools\\MicroBuild\\Build.proj(0,0): error MSB3073: The command "powershell -noprofile -executionPolicy ByPass -file E:\\A\\_work\\0\\s\\src\\Tools\\MicroBuild\\publish-assets.ps1 -binariesPath "E:\\A\\_work\\0\\s\\src\\Tools\\MicroBuild\\..\\..\\..\\Binaries\\platform" -branchName refs/heads/master -apiKey ******** " exited with code -1.',
 'error: 13> 15.05.02.18 Microsoft.VisualStudio.Tools.Build.BuildManagerException: The underlying connection was closed: A connection that was expected to be kept alive was closed by the server. ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host',
 '/root/coreclr/Tools/FrameworkTargeting.targets(0,0): error MSB4019: The imported project "/root/coreclr/Tools/Extensions/Microsoft/Portable/v4.5/Microsoft.Portable.CSharp.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk. [/root/coreclr/src/mscorlib/facade/mscorlib.csproj]',
 'genericmethods.il(60): error : Method cannot have body if it is non-static declared in interface abstract [E:\\A\\_work\\0\\s\\tests\\src\\Loader\\classloader\\DefaultInterfaceMethods\\genericmethods\\genericmethods.ilproj]',
 "dpkg-shlibdeps: warning: debian/dotnet-sharedframework-microsoft.netcore.app-2.0.0-preview1-001929-00/usr/share/dotnet/shared/Microsoft.NETCore.App/2.0.0-preview1-001929-00/libhostfxr.so contains an unresolvable reference to symbol dlerror: it's probably a plugin",
 'error: 13> 18.16.39.51 Microsoft.VisualStudio.Tools.Build.BuildManagerException: The underlying provider failed on Open.',
 'E:\\A\\_work\\0\\s\\tests\\src\\IL.targets(0,0): error MSB3073: The command "E:\\A\\_work\\0\\s\\bin\\Product\\Windows_NT.x64.platform\\ilasm /EXE /OUTPUT=E:\\A\\_work\\0\\s\\bin\\tests\\obj\\Windows_NT.x64.platform\\Managed\\Loader\\classloader\\DefaultInterfaceMethods\\simple\\simple\\simple.exe -QUIET -NOLOGO -platform=OPT -OPTIMIZE simple.il" exited with code 9009. [E:\\A\\_work\\0\\s\\tests\\src\\Loader\\classloader\\DefaultInterfaceMethods\\simple\\simple.ilproj]',
 'E:\\A\\_work\\0\\s\\Tools\\SyncCloudContent.targets(0,0): error : A task was canceled. [E:\\A\\_work\\0\\s\\src\\syncAzure.proj]',
 'E:\\A\\_work\\0\\a\\MicroBuild\\Plugins\\MicroBuild.Plugins.Signing.1.0.321\\build\\MicroBuild.Plugins.Signing.targets(0,0): error MSB4018: Microsoft.VisualStudio.Tools.Build.BuildManagerException: The underlying connection was closed: An unexpected error occurred on a receive. ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host [E:\\A\\_work\\0\\s\\corefx\\src\\sign.builds]',
 'simple.il(86): error : Non-public instance method in interface [E:\\A\\_work\\0\\s\\tests\\src\\Loader\\classloader\\DefaultInterfaceMethods\\simple\\simple.ilproj]',
 '[Symbol App][VERBOSE] 2017-06-21T16:47:38.7013310-07:00  Microsoft.VisualStudio.Services.Common.VssServiceException: The remote server returned an error: (503) Server Unavailable.',
 "CSC : error CS7027: Error signing output with public key from file 'E:\\A\\_work\\0\\s\\tests\\..\\Tools\\Test.snk' -- Operation did not complete successfully because the file contains a virus or potentially unwanted software. (Exception from HRESULT: 0x800700E1) [E:\\A\\_work\\0\\s\\tests\\src\\JIT\\Directed\\cmov\\Int_And_Op_cs_ro.csproj]",
 'E:\\A\\_work\\0\\b\\pipelineRepository\\Tools\\SyncCloudContent.targets(0,0): error :    at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task) [E:\\A\\_work\\0\\b\\pipelineRepository\\src\\syncAzure.proj]',
 'E:\\A\\_work\\0\\s\\tests\\build.proj(0,0): error MSB3073: The command ""E:\\A\\_work\\0\\s\\tests\\..\\Tools\\dotnetcli\\dotnet.exe" restore --packages "E:\\A\\_work\\0\\s\\tests\\..\\packages" --source E:\\A\\_work\\0\\s\\tests\\..\\packages\\AzureTransfer\\platform\\pkg\\ --source E:\\A\\_work\\0\\s\\tests\\..\\packages\\AzureTransfer\\ --source https://dotnet.myget.org/F/dotnet-corefxlab/api/v3/index.json --source https://dotnet.myget.org/F/dotnet-core/api/v3/index.json --source https://api.nuget.org/v3/index.json E:\\A\\_work\\0\\s\\tests\\scripts\\scripts.csproj /p:CoreClrPackageVersion=2.1.0-preview1-25416-03" exited with code 1.',
 'simple.il(118): error : Method cannot have body if it is non-static declared in interface abstract [E:\\A\\_work\\0\\s\\tests\\src\\Loader\\classloader\\DefaultInterfaceMethods\\simple\\simple.ilproj]',
 'E:\\A\\_work\\0\\a\\MicroBuild\\Plugins\\MicroBuild.Plugins.Signing.1.0.321\\build\\MicroBuild.Plugins.Signing.targets(0,0): error MSB4018: The "SignFiles" task failed unexpectedly. [E:\\A\\_work\\0\\s\\corefx\\src\\sign.builds]',
 "E:\\A\\_work\\0\\s\\corefx\\bin\\obj\\AnyOS.AnyCPU.platform\\mscorlib\\uap\\_AssemblyInfo.cs(0,0): error CS0246: The type or namespace name 'AssemblyVersion' could not be found (are you missing a using directive or an assembly reference?) [E:\\A\\_work\\0\\s\\corefx\\src\\shims\\manual\\mscorlib.csproj]",
 'E:\\A\\_work\\0\\s\\bin\\obj\\Windows_NT.arm64.platform\\src\\vm\\wks\\AsmHelpers.asm(4207): error A2504: Unknown error [E:\\A\\_work\\0\\s\\bin\\obj\\Windows_NT.arm64.platform\\src\\vm\\wks\\cee_wks.vcxproj]',
 '[ 82%] error: Could not read profile: Unsupported format version',
 '##[error]/Users/buildagent/agent/_work/49/s/build.sh failed with error: /Users/buildagent/agent/_work/49/s/build.sh failed with return code: 1',
 'E:\\A\\_work\\0\\s\\core-setup\\publish\\publish.proj(0,0): error MSB3073: The command "E:\\A\\_work\\0\\s\\core-setup\\Tools/dotnetcli/dotnet.exe nuget push --source https://dotnet.myget.org/F/dotnet-core/symbols/api/v2/package --api-key ******** --timeout 3600 E:\\A\\_work\\0\\s\\core-setup\\Bin/ForPublishing/runtime.osx-x64.Microsoft.NETCore.App.2.1.0-dev-di-25419-02.symbols.nupkg" exited with code 1.',
 "E:\\A\\_work\\0\\s\\corefx\\bin\\obj\\AnyOS.AnyCPU.platform\\mscorlib\\netcoreapp\\_AssemblyInfo.cs(0,0): error CS0246: The type or namespace name 'AssemblyVersion' could not be found (are you missing a using directive or an assembly reference?) [E:\\A\\_work\\0\\s\\corefx\\src\\shims\\manual\\mscorlib.csproj]",
 "info : An error was encountered when fetching 'GET https://api.nuget.org/v3-flatcontainer/runtime.native.system.security.cryptography/4.0.1/runtime.native.system.security.cryptography.4.0.1.nupkg'. The request will now be retried."]

pickleClf = open('linearClf.pickle','rb')
linearClf = pickle.load(pickleClf)

getEqClass = input()
vector = []
for r in representativeElementOfEqClass:
    vector.append(custom_distance(getEqClass, r))
vector = preprocessing.scale(np.array(vector))
print("Cluster no. " + str(linearClf.predict(vector.reshape(1,-1))[0]-1))
